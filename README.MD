
# ğŸ¦ API Despesas - Backend

API REST para controle de despesas recorrentes, desenvolvida com Node.js, Express e MongoDB. Possui autenticaÃ§Ã£o JWT, testes automatizados e usuÃ¡rio demo para demonstraÃ§Ã£o.

## ğŸš€ Tecnologias Utilizadas

### Core
- **Node.js**
```

## ğŸ” VariÃ¡veis de Ambiente ObrigatÃ³rias

| VariÃ¡vel | DescriÃ§Ã£o | Exemplo |
|----------|-----------|---------|
| `PORT` | Porta do servidor | `8000` |
| `MONGODB_URI` | URI do MongoDB | `mongodb://localhost:27017/despesas_recorrentes` |
| `JWT_SECRET` | Chave secreta JWT | `chave-super-secreta` |
| `FRONTEND_URL` | URL do frontend | `http://localhost:3000` |
| `REGISTER_PASSWORD` | Senha para registro | `admin123` |
| `DEMO_USER_EMAIL` | Email do usuÃ¡rio demo | `demo@exemplo.com` |
| `DEMO_USER_PASSWORD` | Senha do usuÃ¡rio demo | `visitante@2025` |

## ğŸ¯ Endpoints Principais

### UsuÃ¡rios
- `POST /api/users/register` â€” Cadastro de usuÃ¡rio
- `POST /api/users/login` â€” Login

### Despesas
- `GET /api/expenses` â€” Listar despesas
- `POST /api/expenses` â€” Criar despesa
- `PUT /api/expenses/:id` â€” Atualizar despesa
- `DELETE /api/expenses/:id` â€” Remover despesa

### Despesas Mensais
- `GET /api/monthly-expenses` â€” Listar despesas mensais
- `POST /api/monthly-expenses` â€” Criar despesa mensal
- `PUT /api/monthly-expenses/:id` â€” Atualizar
- `DELETE /api/monthly-expenses/:id` â€” Remover

### Pagamentos
- `GET /api/payments` â€” Listar pagamentos
- `POST /api/payments` â€” Criar pagamento
- `PUT /api/payments/:id` â€” Atualizar pagamento
- `DELETE /api/payments/:id` â€” Remover pagamento

### Variantes
- `GET /api/variants` â€” Listar variantes
- `POST /api/variants` â€” Criar variante
- `PUT /api/variants/:id` â€” Atualizar variante
- `DELETE /api/variants/:id` â€” Remover variante

### UsuÃ¡rio Demo
- `GET /api/demo/credentials` â€” Obter credenciais demo
- `POST /api/demo/reset` â€” Resetar dados demo
- `POST /api/demo/initialize` â€” Inicializar demo

## ï¿½ Docker

```bash
# Build da imagem
  "registerPassword": "admin123"

# Executar com Docker Compose
}
```

## ğŸ¤ Contribuindo

1. FaÃ§a o fork do projeto
2. Crie uma branch para sua feature (`git checkout -b feature/sua-feature`)
3. Commit suas mudanÃ§as (`git commit -m 'feat: minha feature'`)
4. Push para a branch (`git push origin feature/sua-feature`)
5. Abra um Pull Request

## ğŸ“ LicenÃ§a

Este projeto estÃ¡ sob a licenÃ§a ISC.

## ğŸ‘¨â€ğŸ’» Autor

Paulo Henrique - [@Paulo-Henrique21](https://github.com/Paulo-Henrique21)

---

â­ DÃª uma estrela se este projeto te ajudou!
```

### Login
```http
POST /api/users/login
Content-Type: application/json

{
  "email": "joao@exemplo.com",
  "password": "minhasenha123"
}
```

## ğŸ¯ Endpoints Principais

### Despesas
```http
GET    /api/expenses          # Listar despesas
POST   /api/expenses          # Criar despesa
PUT    /api/expenses/:id      # Atualizar despesa
DELETE /api/expenses/:id      # Remover despesa
```

### Despesas Mensais
```http
GET    /api/monthly-expenses  # Listar despesas mensais
POST   /api/monthly-expenses  # Criar despesa mensal
PUT    /api/monthly-expenses/:id  # Atualizar
DELETE /api/monthly-expenses/:id  # Remover
```

### Pagamentos
```http
GET    /api/payments          # Listar pagamentos
POST   /api/payments          # Criar pagamento
PUT    /api/payments/:id      # Atualizar pagamento
DELETE /api/payments/:id      # Remover pagamento
```

### Variantes
```http
GET    /api/variants          # Listar variantes
POST   /api/variants          # Criar variante
PUT    /api/variants/:id      # Atualizar variante
DELETE /api/variants/:id      # Remover variante
```

## ğŸª UsuÃ¡rio Demo

O sistema inclui um usuÃ¡rio de demonstraÃ§Ã£o com dados resetados automaticamente Ã  meia-noite todos os dias.

### Credenciais Demo
```http
GET /api/demo/credentials
```

**Resposta:**
```json
{
  "message": "Credenciais do usuÃ¡rio demo",
  "credentials": {
    "email": "demo@exemplo.com",
    "password": "visitante@2025"
  },
  "note": "Dados resetados diariamente Ã  meia-noite"
}
```

### Reset Manual
```http
POST /api/demo/reset
```

### Inicializar Demo
```http
POST /api/demo/initialize
```

## ğŸ§ª Testes

```bash
# Executar todos os testes
npm test

# Modo watch (desenvolvimento)
npm run test:watch

# Cobertura de cÃ³digo
npm run test:coverage

# Testes verbosos
npm run test:verbose
```

## ğŸ³ Docker

```bash
# Build da imagem
docker build -t api-despesas .

# Executar com Docker Compose
docker-compose up -d
```

## ğŸ” VariÃ¡veis de Ambiente ObrigatÃ³rias

| VariÃ¡vel | DescriÃ§Ã£o | Exemplo |
|----------|-----------|---------|
| `PORT` | Porta do servidor | `8000` |
| `MONGODB_URI` | URI do MongoDB | `mongodb://localhost:27017/despesas` |
| `JWT_SECRET` | Chave secreta JWT | `chave-super-secreta` |
| `FRONTEND_URL` | URL do frontend | `http://localhost:3000` |
| `REGISTER_PASSWORD` | Senha para registro | `admin123` |
| `DEMO_USER_EMAIL` | Email do usuÃ¡rio demo | `demo@exemplo.com` |
| `DEMO_USER_PASSWORD` | Senha do usuÃ¡rio demo | `visitante@2025` |

## ğŸ“Š Scripts DisponÃ­veis

```bash
npm run dev          # Desenvolvimento com nodemon
npm test             # Executar testes
npm run test:watch   # Testes em modo watch
npm run test:coverage # Cobertura de testes
```

## ğŸ¤ Contribuindo

1. FaÃ§a o fork do projeto
2. Crie uma branch para sua feature (`git checkout -b feature/AmazingFeature`)
3. Commit suas mudanÃ§as (`git commit -m 'Add some AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abra um Pull Request

## ğŸ“ LicenÃ§a

Este projeto estÃ¡ sob a licenÃ§a ISC.

## ğŸ‘¨â€ğŸ’» Autor

Paulo Henrique - [@Paulo-Henrique21](https://github.com/Paulo-Henrique21)

---

â­ DÃª uma estrela se este projeto te ajudou!
